<footer class="footer">
    <span>&copy; {{ now.Year }} <a href="{{ "" | absLangURL }}">{{ .Site.Title }}</a></span>
</footer>

<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        // Check if currently consistently dark (either by class or system preference with no override)
        // If dataset.theme is present, it means we have an explicit override, so we trust the class presence.
        // If dataset.theme is missing, we check system preference.
        const isDark = document.body.className.includes("dark") ||
            (!document.documentElement.dataset.theme && window.matchMedia('(prefers-color-scheme: dark)').matches);

        if (isDark) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
            document.documentElement.dataset.theme = 'light';
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
            document.documentElement.dataset.theme = 'dark';
        }
    })
</script>